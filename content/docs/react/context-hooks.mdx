---
title: Context Hooks
description: Context allows a component to receive information from distant parents without prop driling.
---

- `useContext` reads and subscribes to a context.

## useContext

### Example: basic

```tsx title="component/product-context.tsx"
const ThemeContext = React.createContext<{
  theme: string
  setTheme: React.Dispatch<React.SetStateAction<string>>
}>({ theme: "light", setTheme: () => {} })

export default function App() {
  const [theme, setTheme] = React.useState("light")
  return (
    <ThemeContext.Provider value={{ theme, setTheme }}>
      <Navbar />
    </ThemeContext.Provider>
  )
}

function Navbar() {
  const { theme, setTheme } = React.useContext(ThemeContext)
  return (
    <div>
      <p>{theme}</p>
      <button onClick={() => setTheme("dark")}>Dark theme</button>
      <button onClick={() => setTheme("light")}>Light theme</button>
    </div>
  )
}
```

### Example: complext component

```tsx title="component/product-context.tsx"
const ProductContext = React.createContext<{ product: Product } | null>(null)

export function useProducContext() {
  const context = React.useContext(ProductContext)
  if (!context) {
    throw new Error(
      "Product.* component must be rendered as child of Product component"
    )
  }
  return context
}

export default ProductContext
```

```tsx title="component/product-card.tsx"
interface ProductCardProps = {
  product: Product;
  children: React.ReactNode;
}

export function ProductCard({ product, children }: ProductCardProps) {
  return (
    <ProductCardContext.Provider value={{product}}>
      {children}
    </ProductCardContext.Provider>
  )
}

function ProductCardTitle(){
  const {product} = useProductCardContext();
  return(
    <h1>{product.title}</h1>
  )
}
```

```tsx title="app/page.tsx"
export default function Home() {
  return (
    <ProductCard product={product}>
      <ProductCardWrapper>
        <ProductCardTitle />
        <ProductCardPrice />
      </ProductCardWrapper>
    </ProductCard>
  )
}
```

### Example: context with reducer

```tsx title="app/page.tsx"
export default function TaskPage() {
  return (
    <TasksProvider>
      <h1>Day off in Kyoto</h1>
      <AddTask />
      <TaskList />
    </TasksProvider>
  )
}
```

```tsx title="component/task-context.tsx"
type Task = (typeof initialTasks)[0]
type Action =
  | ReturnType<typeof addTodo>
  | ReturnType<typeof changeTodo>
  | ReturnType<typeof deleteTodo>

type State = typeof initialTasks

const addTodo = (text: string) => ({
  type: "added" as const,
  payload: { text },
})

const changeTodo = (task: Task) => ({
  type: "changed" as const,
  payload: { task },
})

const deleteTodo = (id: number) => ({
  type: "deleted" as const,
  payload: { id },
})

const TasksContext = React.createContext<State | null>(null)

const TasksDispatchContext = React.createContext<React.Dispatch<Action> | null>(
  null
)

export function TasksProvider({ children }) {
  const [tasks, dispatch] = React.useReducer<React.Reducer<State, Action>>(
    tasksReducer,
    initialTasks
  )

  return (
    <TasksContext.Provider value={tasks}>
      <TasksDispatchContext.Provider value={dispatch}>
        {children}
      </TasksDispatchContext.Provider>
    </TasksContext.Provider>
  )
}

export function useTasks() {
  return React.useContext(TasksContext)
}

export function useTasksDispatch() {
  return React.useContext(TasksDispatchContext)
}

function tasksReducer(tasks: State, action: Action) {
  switch (action.type) {
    case "added": {
      return [
        ...tasks,
        {
          id: Math.random(),
          text: action.payload.text,
          done: false,
        },
      ]
    }
    case "changed": {
      return tasks.map((t) => {
        if (t.id === action.payload.task.id) {
          return action.payload.task
        } else {
          return t
        }
      })
    }
    case "deleted": {
      return tasks.filter((t) => t.id !== action.payload.id)
    }
    default: {
      throw Error("Unknown action: " + action["type"])
    }
  }
}

const initialTasks = [
  { id: 0, text: "Philosopherâ€™s Path", done: true },
  { id: 1, text: "Visit the temple", done: false },
  { id: 2, text: "Drink matcha", done: false },
]
```

```tsx title="component/add-task.tsx"
export function AddTask() {
  const [text, setText] = React.useState("")
  const dispatch = useTasksDispatch()

  if (dispatch === null) {
    return null
  }

  return (
    <>
      <input
        placeholder="Add task"
        value={text}
        onChange={(e) => setText(e.target.value)}
      />
      <button onClick={() => {
          setText("")
          dispatch({
            type: "added",
            payload: { text },
          })
        }}>
        Add
      </button>
    </>
  )
}
```

```tsx title="component/task-list.tsx"
export function TaskList() {
  const tasks = useTasks()

  if (tasks === null) {
    return <p>Make new tasks</p>
  }

  return (
    <ul>
      {tasks.map((task) => (
        <li key={task.id}>
          <Task task={task} />
        </li>
      ))}
    </ul>
  )
}
```

```tsx title="component/task.tsx"
export function Task({ task }: { task: Task }) {
  const dispatch = useTasksDispatch()

  if (dispatch === null) {
    return null
  }
  return (
    <button
      onClick={() =>
        dispatch({
          type: "changed",
          payload: { task: { ...task, done: true } },
        })
      }
      className={cn(task.done && "line-through")}
    >
      {task.text}
    </button>
  )
}
```
